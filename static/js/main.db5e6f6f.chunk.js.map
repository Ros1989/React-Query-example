{"version":3,"sources":["services/api.js","components/shared/Container.jsx","components/BookList/BookItem.jsx","components/BookList/BookList.jsx","components/shared/BookForm.jsx","components/shared/logo.png","components/shared/NavBar.jsx","components/CreateBook/CreateBook.jsx","components/App.js","components/UpdateBook/index.js","index.js"],"names":["getAllBooks","a","fetch","process","REACT_APP_SERVER","response","ok","Error","json","removeBook","id","method","message","createBook","data","headers","body","JSON","stringify","Container","children","sx","width","maxWidth","mx","BookItem","author","title","queryClient","useQueryClient","useMutation","mutateAsync","isLoading","remove","invalidateQueries","p","alignItems","component","StyledLink","to","mr","ml","onClick","type","color","height","BookList","useQuery","error","isError","py","justifyContent","flexDirection","map","BookForm","defaultValues","onFormSubmit","useForm","register","onSubmit","handleSubmit","marginBottom","htmlFor","ref","name","NavBar","bg","px","size","src","logo","variant","CreateBook","history","useHistory","push","App","path","QueryClient","ReactDOM","render","StrictMode","QueryClientProvider","client","theme","preset","document","getElementById"],"mappings":"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","file":"static/js/main.db5e6f6f.chunk.js","sourcesContent":["export const getAllBooks = async () => {\r\n    const response = await fetch(`${process.env.REACT_APP_SERVER}/books`)\r\n\r\n    if (!response.ok) {\r\n        throw new Error(\"Something went wrong!!!\")\r\n    }\r\n\r\n    return response.json()\r\n}\r\n\r\nexport const updateBook = async ({ id, ...data }) => {\r\n    const response = await fetch(`${process.env.REACT_APP_SERVER}/books/${id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n\r\n    if (!response.ok) {\r\n        throw new Error(response.json().message)\r\n    }\r\n    return response.json()\r\n}\r\n\r\nexport const getBook = async ({ queryKey }) => {\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [key, { id }] = queryKey;\r\n    const response = await fetch(`${process.env.REACT_APP_SERVER}/books/${id}`)\r\n\r\nif (!response.ok) {\r\n        throw new Error(response.json().message)\r\n    }\r\n    return response.json()\r\n}\r\n\r\n\r\nexport const removeBook = async (id) => {\r\n    const response = await fetch(`${process.env.REACT_APP_SERVER}/books/${id}`, {\r\n        method: \"Delete\"\r\n    })\r\n\r\n    if (!response.ok) {\r\n        throw new Error(response.json().message)\r\n    }\r\n\r\n    return true\r\n}\r\n\r\n\r\nexport const createBook = async (data) => {\r\n    const response = await fetch(`${process.env.REACT_APP_SERVER}/books/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n\r\n     if (!response.ok) {\r\n        throw new Error(response.json().message)\r\n    }\r\n\r\n    return response.json()\r\n}\r\n    ","import { Box } from 'rebass/styled-components';\r\n\r\nexport const Container = ({ children }) => {\r\n    return (\r\n        <Box sx={{\r\n            width: \"100%\",\r\n            maxWidth: 1024,\r\n            mx: \"auto\"\r\n        }}>\r\n            {children}\r\n        </Box>\r\n    )\r\n}","import { Flex, Text, Button, Link as StyledLink } from 'rebass/styled-components';\r\nimport { Link } from 'react-router-dom';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { removeBook } from '../../services/api';\r\nimport Loader from 'react-loader-spinner';\r\n\r\n\r\nexport const BookItem = ({ author, title, id }) => {\r\nconst queryClient = useQueryClient() \r\n     const { mutateAsync, isLoading } = useMutation(removeBook)\r\n    \r\n    const remove = async () => {\r\n        await mutateAsync(id)\r\n        queryClient.invalidateQueries(\"books\")\r\n    }\r\n    return (\r\n         <Flex p=\"3\" width=\"100%\" alignItems=\"center\">\r\n        <Link component={StyledLink} to={`/update-book/${id}`} mr=\"auto\"> {title} </Link>\r\n        <Text> {author} </Text>\r\n        <Button ml=\"5\" onClick={remove}>\r\n           { isLoading ? <Loader type=\"ThreeDots\" color=\"#fff\" height={10}/> : \"Remove\"}\r\n        </Button>\r\n    </Flex>\r\n    )\r\n}","import { useQuery } from 'react-query';\r\nimport { getAllBooks } from '../../services/api';\r\nimport { Container } from '../shared/Container';\r\nimport { Flex } from 'rebass/styled-components';\r\nimport Loader from 'react-loader-spinner';\r\nimport { BookItem } from './BookItem';\r\n\r\n\r\nexport const BookList = () => {\r\n    const { data, error, isLoading, isError } = useQuery(\"books\", getAllBooks)\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Container>\r\n            <Flex py=\"5\" justifyContent=\"center\">\r\n                <Loader type=\"ThreeDots\" color=\"#ccc\" height= {30} />\r\n         </Flex>\r\n        </Container>\r\n        )\r\n    }\r\n\r\n    if (isError) {\r\n        return <span>Error: {error.message}</span>\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Flex flexDirection=\"column\" alignItems=\"center\">\r\n                {\r\n                    data.map(({ author, title, id }) => (\r\n                        <BookItem author={author} title={title} key={id} id={id}/>\r\n                        \r\n                    ))\r\n                }\r\n            </Flex>\r\n        </Container>\r\n    )\r\n}","import { Box, Button } from 'rebass/styled-components';\r\nimport { Label, Input } from '@rebass/forms';\r\nimport { useForm } from 'react-hook-form';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nexport const BookForm = ({ defaultValues, onFormSubmit, isLoading }) => {\r\n    const { register, handleSubmit } = useForm({ defaultValues })\r\n    \r\n    const onSubmit = handleSubmit((data) => {\r\n        onFormSubmit(data)\r\n    })\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <Box sx={{ marginBottom: 3 }}>\r\n                <Label htmlFor=\"title\">Title</Label>\r\n                <Input ref={register} id=\"title\" name=\"title\" type=\"text\"></Input>\r\n            </Box>\r\n            <Box sx={{ marginBottom: 3 }}>\r\n                <Label htmlFor=\"author\">Author</Label>\r\n                <Input ref={register} id=\"author\" name=\"author\" type=\"text\"></Input>\r\n            </Box>\r\n            <Button>\r\n                {isLoading ? (<Loader type=\"ThreeDots\" color=\"#fff\" height={10} />\r\n                ) : (\r\n                        \"Submit\")\r\n                }\r\n            </Button>\r\n        </form>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/logo.9e65bb88.png\";","import { Flex, Box, Link as StyledLink, Image } from 'rebass/styled-components';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container } from './Container';\r\nimport logo from './logo.png';\r\n\r\n\r\nexport const NavBar = () => {\r\n    return (\r\n        <Flex bg=\"black\" color=\"white\" justifyContent=\"center\">\r\n            <Container>\r\n                <Flex px={2} width=\"100%\" alignItems=\"center\">\r\n                    <Image size={20} src={logo}/>\r\n                <Link component={StyledLink} variant=\"nav\" to=\"/\">\r\n                    React Query CRUD\r\n                </Link>\r\n                <Box mx=\"auto\" />\r\n                 <Link component={StyledLink} variant=\"nav\" to=\"/create-book\">\r\n                    + Add new book\r\n                </Link>\r\n            </Flex>\r\n           </Container>\r\n        </Flex>\r\n    )\r\n}","import { BookForm, Container } from \"../shared\";\r\nimport { Box, Heading } from 'rebass/styled-components';\r\nimport { useMutation } from 'react-query';\r\nimport { createBook } from '../../services/api';\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nexport const CreateBook = () => {\r\n    const history = useHistory()\r\nconst { mutateAsync, isLoading } = useMutation(createBook)\r\n\r\n    const onFormSubmit = async (data) => {\r\n        await mutateAsync(data);\r\n        history.push(\"/\")\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Box sx={{py: 3}}>\r\n                <Heading sx={{marginBottom: 3}} >Create New Book</Heading>\r\n                <BookForm onFormSubmit= {onFormSubmit} isLoading= {isLoading} />\r\n            </Box>\r\n        </Container>\r\n    )\r\n}","import {Switch, Route} from 'react-router-dom';\r\nimport {BookList} from './BookList';\r\nimport {CreateBook} from './CreateBook';\r\nimport UpdateBook from './UpdateBook';\r\nimport {NavBar} from './shared/NavBar';\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <NavBar/>\r\n      <Switch>\r\n       <Route path=\"/update-book/id\">\r\n        <UpdateBook/>\r\n      </Route>\r\n      <Route path=\"/create-book\">\r\n        <CreateBook/>\r\n      </Route>\r\n      <Route path=\"/\">\r\n        <BookList/>\r\n      </Route>\r\n    </Switch> \r\n   </>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","export default './UpdateBook.jsx'","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport preset from '@rebass/preset';\r\nimport { QueryClientProvider, QueryClient } from 'react-query';\r\n\r\n\r\nconst queryClient = new QueryClient()\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <QueryClientProvider client={queryClient}>\r\n      <ThemeProvider theme={preset}>\r\n      <BrowserRouter>\r\n       <App />\r\n    </BrowserRouter>\r\n    </ThemeProvider>\r\n    </QueryClientProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}